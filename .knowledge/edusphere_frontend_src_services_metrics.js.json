{"is_source_file": true, "format": "JavaScript", "description": "This file defines and implements metrics-related functionalities for a frontend application, including configuration constants, utility functions, and functions to subscribe to real-time updates and fetch various metrics such as course count, active learners, and recent completions from a Supabase backend.", "external_files": ["../lib/supabaseClient"], "external_methods": ["getSupabase"], "published": ["subscribeToMetrics", "fetchCoursesCount", "fetchActiveLearnersCount", "fetchRecentCompletionsCount", "fetchAllMetrics"], "classes": [], "methods": [{"name": "safeCount(val)", "description": "Utility to safely convert a value to a count, returning 0 if null, undefined, or NaN.", "scope": "", "scopeKind": ""}, {"name": "isoMinutesAgo(minutes)", "description": "Returns an ISO timestamp string for the current time minus a specified number of minutes.", "scope": "", "scopeKind": ""}, {"name": "fetchActiveLearnersCount()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "fetchAllMetrics()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "fetchCoursesCount()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "fetchRecentCompletionsCount()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "subscribeToMetrics({ onChange, signal } = {})", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["getSupabase", "client.channel", "channel.on", "channel.subscribe", "client.removeChannel", "fetchActiveLearnersCount", "fetchRecentCompletionsCount", "fetchCoursesCount"], "search-terms": ["metrics", "supabase", "real-time", "analytics_events", "user_presence", "subscribeToMetrics", "fetchActiveLearnersCount", "fetchRecentCompletionsCount", "configuration constants"], "state": 2, "file_id": 59, "knowledge_revision": 163, "git_revision": "", "revision_history": [{"156": ""}, {"161": ""}, {"162": ""}, {"163": ""}], "ctags": [{"_type": "tag", "name": "METRICS_CONFIG", "path": "/home/kavia/workspace/code-generation/edusphere-learning-platform-256981-257051/edusphere_frontend/src/services/metrics.js", "pattern": "/^export const METRICS_CONFIG = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "activeWindowMinutes", "path": "/home/kavia/workspace/code-generation/edusphere-learning-platform-256981-257051/edusphere_frontend/src/services/metrics.js", "pattern": "/^  activeWindowMinutes: 15,$/", "language": "JavaScript", "kind": "property", "scope": "METRICS_CONFIG", "scopeKind": "class"}, {"_type": "tag", "name": "analyticsEventsTable", "path": "/home/kavia/workspace/code-generation/edusphere-learning-platform-256981-257051/edusphere_frontend/src/services/metrics.js", "pattern": "/^  analyticsEventsTable: 'analytics_events',$/", "language": "JavaScript", "kind": "property", "scope": "METRICS_CONFIG", "scopeKind": "class"}, {"_type": "tag", "name": "completionEventName", "path": "/home/kavia/workspace/code-generation/edusphere-learning-platform-256981-257051/edusphere_frontend/src/services/metrics.js", "pattern": "/^  completionEventName: 'completion',$/", "language": "JavaScript", "kind": "property", "scope": "METRICS_CONFIG", "scopeKind": "class"}, {"_type": "tag", "name": "completionWindowMinutes", "path": "/home/kavia/workspace/code-generation/edusphere-learning-platform-256981-257051/edusphere_frontend/src/services/metrics.js", "pattern": "/^  completionWindowMinutes: 1440, \\/\\/ 24 hours$/", "language": "JavaScript", "kind": "property", "scope": "METRICS_CONFIG", "scopeKind": "class"}, {"_type": "tag", "name": "coursesTable", "path": "/home/kavia/workspace/code-generation/edusphere-learning-platform-256981-257051/edusphere_frontend/src/services/metrics.js", "pattern": "/^  coursesTable: 'courses',$/", "language": "JavaScript", "kind": "property", "scope": "METRICS_CONFIG", "scopeKind": "class"}, {"_type": "tag", "name": "fetchActiveLearnersCount", "path": "/home/kavia/workspace/code-generation/edusphere-learning-platform-256981-257051/edusphere_frontend/src/services/metrics.js", "pattern": "/^export async function fetchActiveLearnersCount() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "fetchAllMetrics", "path": "/home/kavia/workspace/code-generation/edusphere-learning-platform-256981-257051/edusphere_frontend/src/services/metrics.js", "pattern": "/^export async function fetchAllMetrics() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "fetchCoursesCount", "path": "/home/kavia/workspace/code-generation/edusphere-learning-platform-256981-257051/edusphere_frontend/src/services/metrics.js", "pattern": "/^export async function fetchCoursesCount() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "fetchRecentCompletionsCount", "path": "/home/kavia/workspace/code-generation/edusphere-learning-platform-256981-257051/edusphere_frontend/src/services/metrics.js", "pattern": "/^export async function fetchRecentCompletionsCount() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "isoMinutesAgo", "path": "/home/kavia/workspace/code-generation/edusphere-learning-platform-256981-257051/edusphere_frontend/src/services/metrics.js", "pattern": "/^function isoMinutesAgo(minutes) {$/", "language": "JavaScript", "kind": "function", "signature": "(minutes)"}, {"_type": "tag", "name": "presenceTable", "path": "/home/kavia/workspace/code-generation/edusphere-learning-platform-256981-257051/edusphere_frontend/src/services/metrics.js", "pattern": "/^  presenceTable: 'user_presence',$/", "language": "JavaScript", "kind": "property", "scope": "METRICS_CONFIG", "scopeKind": "class"}, {"_type": "tag", "name": "safeCount", "path": "/home/kavia/workspace/code-generation/edusphere-learning-platform-256981-257051/edusphere_frontend/src/services/metrics.js", "pattern": "/^function safeCount(val) {$/", "language": "JavaScript", "kind": "function", "signature": "(val)"}, {"_type": "tag", "name": "subscribeToMetrics", "path": "/home/kavia/workspace/code-generation/edusphere-learning-platform-256981-257051/edusphere_frontend/src/services/metrics.js", "pattern": "/^export function subscribeToMetrics({ onChange, signal } = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "({ onChange, signal } = {})"}], "hash": "a100a8407bb56fbe055fe5e376f99634", "format-version": 4, "code-base-name": "edusphere_frontend", "filename": "edusphere_frontend/src/services/metrics.js", "fields": [{"name": "activeWindowMinutes: 15,", "scope": "METRICS_CONFIG", "scopeKind": "class", "description": "unavailable"}, {"name": "analyticsEventsTable: 'analytics_events',", "scope": "METRICS_CONFIG", "scopeKind": "class", "description": "unavailable"}, {"name": "completionEventName: 'completion',", "scope": "METRICS_CONFIG", "scopeKind": "class", "description": "unavailable"}, {"name": "completionWindowMinutes: 1440, \\/\\/ 24 hours", "scope": "METRICS_CONFIG", "scopeKind": "class", "description": "unavailable"}, {"name": "coursesTable: 'courses',", "scope": "METRICS_CONFIG", "scopeKind": "class", "description": "unavailable"}, {"name": "presenceTable: 'user_presence',", "scope": "METRICS_CONFIG", "scopeKind": "class", "description": "unavailable"}]}