{"is_source_file": true, "format": "JavaScript", "description": "This file contains code for initializing and interfacing with a Supabase client, including functions to manage authentication states, user profiles, storage, and real-time features. It acts as a singleton module to provide public API methods for other parts of the frontend application.", "external_files": ["@supabase/supabase-js", "../config/env"], "external_methods": ["createClient", "getEnv"], "published": ["getSupabase", "getStorage", "getRealtime"], "classes": [], "methods": [{"name": "getSupabase()", "description": "Initializes and returns a singleton Supabase client with session persistence and authentication state handling.", "scope": "", "scopeKind": ""}, {"name": "ensureUserProfile(user)", "description": "Ensures that a user profile exists in the database for the signed-in user; creates or updates the profile as necessary.", "scope": "", "scopeKind": ""}, {"name": "getStorage()", "description": "Returns the Supabase storage interface.", "scope": "", "scopeKind": ""}, {"name": "getRealtime()", "description": "Returns the Supabase real-time channel interface.", "scope": "", "scopeKind": ""}], "calls": ["createClient", "getEnv", "client.from", "client.upsert", "client.select", "client.single", "supabase.auth.onAuthStateChange", "ensureUserProfile"], "search-terms": ["Supabase client singleton", "auth state change handler", "user profile upsert", "storage interface", "real-time channel"], "state": 2, "file_id": 14, "knowledge_revision": 30, "git_revision": "", "ctags": [{"_type": "tag", "name": "ensureUserProfile", "path": "/home/kavia/workspace/code-generation/edusphere-learning-platform-256981-257051/edusphere_frontend/src/lib/supabaseClient.js", "pattern": "/^async function ensureUserProfile(user) {$/", "language": "JavaScript", "kind": "function", "signature": "(user)"}, {"_type": "tag", "name": "getRealtime", "path": "/home/kavia/workspace/code-generation/edusphere-learning-platform-256981-257051/edusphere_frontend/src/lib/supabaseClient.js", "pattern": "/^export function getRealtime() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getStorage", "path": "/home/kavia/workspace/code-generation/edusphere-learning-platform-256981-257051/edusphere_frontend/src/lib/supabaseClient.js", "pattern": "/^export function getStorage() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getSupabase", "path": "/home/kavia/workspace/code-generation/edusphere-learning-platform-256981-257051/edusphere_frontend/src/lib/supabaseClient.js", "pattern": "/^export function getSupabase() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "supabase", "path": "/home/kavia/workspace/code-generation/edusphere-learning-platform-256981-257051/edusphere_frontend/src/lib/supabaseClient.js", "pattern": "/^let supabase;$/", "language": "JavaScript", "kind": "variable"}], "hash": "d4e1194568ee8f2aa275f5fb10b1f36f", "format-version": 4, "code-base-name": "edusphere_frontend", "filename": "edusphere_frontend/src/lib/supabaseClient.js", "fields": [{"name": "let supabase;", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"30": ""}]}